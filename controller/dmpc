#!/bin/sh

# set -x
if [ -z "$(pidof spotify)" ] || [ ! "$(playerctl -l)" ]
then
	toggle() { mpc --host=127.0.0.1 --port=6600 toggle ; }
	next() { mpc --host=127.0.0.1 --port=6600 next ; }
	prev() { mpc --host=127.0.0.1 --port=6600 prev ; }

else
	mpc pause
	toggle() { playerctl -p spotify play-pause ; }
	next() { playerctl -p spotify next ; }
	prev() { playerctl -p spotify previous ; }
fi

case "$1" in
	toggle) toggle ;;
	next) next ;;
	prev) prev ;;
esac

pkill -RTMIN+11 dwmblocks
