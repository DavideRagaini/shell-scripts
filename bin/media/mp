#!/bin/sh
pidof -q spotifyd &&
	CHOSEN="Sptui"

mpc status 2>/dev/null | grep -q playing &&
	CHOSEN="Local"

[ -z $CHOSEN ] &&
	CHOSEN="$(printf 'Spotify\nLocal' | fzf --cycle --border --margin 10% --padding 10% --header='Choose music source')"

if [ "$(command -v spotify-tui)"  = "" ]; then
		SPOTIFY="spt"
	else
		SPOTIFY="spotify-tui"
fi

case "$CHOSEN" in
	Spotify) spotifyd --autoplay && exec $SPOTIFY ;;
	Local) exec ncmpcpp ;;
	Sptui) exec $SPOTIFY ;;
	*) notify-send "Something wrong"
esac
