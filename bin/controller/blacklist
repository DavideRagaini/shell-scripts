#!/bin/sh

HOSTS="${XDG_DATA_HOME:-$HOME/.local/share}/hosts.d"

set_hosts() {
    [ -e /etc/hosts ] ||
        (sudo ln -sf "$HOSTS/hosts" "/etc/hosts" &&
            notify-send "Hosts Set")

    [ -e /etc/hosts.deny ] ||
        (sudo ln -sf "$HOSTS/hosts.deny" "/etc/hosts.deny" &&
            notify-send "Hosts.deny Set")

    [ -e /etc/superhosts.deny ] ||
        (sudo ln -sf "$HOSTS/superhosts.deny" "/etc/superhosts.deny" &&
            notify-send "Superhosts.deny Set")
}

case "$1" in
    on)
        set_hosts
        ;;

    update)
        echo 'Downloading hosts'
        curl -o "$HOSTS/hosts1" "https://hosts.ubuntu101.co.za/hosts" >"$HOSTS/hosts"
        curl -o "$HOSTS/hosts2" 'http://sbc.io/hosts/alternates/fakenews-gambling-porn/hosts' >>"$HOSTS/hosts"

        echo 'Downloading hosts.deny'
        curl -o "$HOSTS/hosts.deny" "https://hosts.ubuntu101.co.za/hosts.deny"

        echo 'Downloading superhosts.deny'
        curl -o "$HOSTS/superhosts.deny" "https://hosts.ubuntu101.co.za/superhosts.deny"

        set_hosts
        ;;

    *)
        echo 'Need arg!'
        ;;
esac
